<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Registration Form</title>
  <style media="screen">
    body {
      background-image: url(image3.jpg);

    }

    .container {
      font-family: Arial, Helvetica, sans-serif;
      margin: 6% 0 6% 10%;
      width: 70%;
      padding: 3% 5% 0 5%;
      background-color: #DCDCDC;
    }

    h1 {
      text-shadow: 0 0 3px white;
      color: grey;
    }

    p {
      /* color:#4B0082; */
      color: red;
    }

    input {
      width: 98%;
      margin: 5px 5px 15px 5px;
      padding: 5px 0px 5px 5px;

    }

    button {
      padding: 10px 15px 10px 15px;
      margin: 0 0 30px 0;
      text-align: right;
      border-radius: 2px;
    }
  </style>
  <script>
    /** Note:
     * 000 - 300 : Himachal
     * 301 - 600 : Kerla
     * 601 - 900 : Maharashtra
     * 901 - 999 : Gujrat
     */

    function validateFullName(event) {
      // console.log('event: ', event);
      // Allow only Alphabets keyCode (between 65 - 90) and SPACE(32) and BACKSPACE(8) and TAB(9)
      if ((event.keyCode < 65 || event.keyCode > 90) &&
        event.keyCode != 32 && event.keyCode != 8 && event.keyCode != 9 &&
        event.keyCode != 37 && event.keyCode != 39) {
        return false;
      }
    }
    // Real time validation
    function validatePhoneNo(event) {
      let phoneNo = document.getElementById('phoneNo').value;
      // alert('phoneNo: '+ phoneNo);
      if (!(event.key === 'Backspace' || event.key === 'Tab')) {
        // Allow only DIGITS(0-9)
        if (isNaN(event.key)) {
          return false;
        }
        // Provid PhoneCompany Name
        if (phoneNo.length === 2) {
          //     123            =   Number('12' + '3')
          let noBelongToCompany = Number(phoneNo + event.key);
          //if the 3 digits fall between 621 - 799, then its Reliance Jio
          if (noBelongToCompany >= 621 && noBelongToCompany <= 799) {
            let phoneCompany = document.getElementById('phoneCompany')
            phoneCompany.innerHTML = 'Relance Jio';
          }
          // if the 3 digits fall between 801 - 920, then its Idea
          else if (noBelongToCompany >= 801 && noBelongToCompany <= 920) {
            let phoneCompany = document.getElementById('phoneCompany')
            phoneCompany.innerHTML = 'Idea';
          }
          // if the 3 digits fall between 921 - 999 then its Vodafone
          else if (noBelongToCompany >= 921 && noBelongToCompany <= 999) {
            let phoneCompany = document.getElementById('phoneCompany')
            phoneCompany.innerHTML = 'Vodafone';
          } else {
            let phoneCompany = document.getElementById('phoneCompany')
            phoneCompany.innerHTML = 'Invalid No.';
          }
        }
        // Provide '-' after 3 DIGIT
        if (phoneNo.length === 3) {
          document.getElementById('phoneNo').value = phoneNo + '-';
        }
        // For state
        /** Note:
         * 000 - 300 : Himachal
         * 301 - 600 : Kerla
         * 601 - 900 : Maharashtra
         * 901 - 999 : Gujrat
         */
        // Provide STATE NAME
        if (phoneNo.length === 6) {
          // '435-457'  = 435-45' + '7'
          let str = phoneNo + event.key;
          // ['435', '457']        =   '435-457'
          let strArray = str.split('-');
          // '457'      =       ['435', '457'][1]
          let numberBelongsState = strArray[1];
          if (numberBelongsState >= 000 && numberBelongsState <= 300) {
            let phoneBelongToState = document.getElementById('phoneBelongToState')
            phoneBelongToState.innerHTML = 'Himachal';
          } else if (numberBelongsState >= 301 && numberBelongsState <= 600) {
            let phoneBelongToState = document.getElementById('phoneBelongToState')
            phoneBelongToState.innerHTML = 'Kerla';
          } else if (numberBelongsState >= 601 && numberBelongsState <= 900) {
            let phoneBelongToState = document.getElementById('phoneBelongToState')
            phoneBelongToState.innerHTML = 'Maharashtra';
          } else if (numberBelongsState >= 901 && numberBelongsState <= 999) {
            let phoneBelongToState = document.getElementById('phoneBelongToState')
            phoneBelongToState.innerHTML = 'Gujrat';
          }
        }

        // Provide '-' after 7 DIGIT
        if (phoneNo.length === 7) {
          document.getElementById('phoneNo').value = phoneNo + '-';
        }

        // Not allow to ENTER after 10 DIGIT
        if (phoneNo.length === 12) {
          alert('You reach max limit [Phone no should be max 10 digit]');
          return false;
        }
      } else {
        // CLEAR TAGS phoneCompany
        if (event.key === 'Backspace' && (phoneNo.length - 1) < 3) {
          let phoneCompany = document.getElementById('phoneCompany')
          phoneCompany.innerHTML = '';
        }
        // CLEAR TAGS State
        if (event.key === 'Backspace' && (phoneNo.length - 1) < 7) {
          let phoneBelongToState = document.getElementById('phoneBelongToState')
          phoneBelongToState.innerHTML = '';
        }
      }

    }

    // Validate FORM on SUBMIT
    function validateForm() {
      // console.log("document" + document.forms);
      // console.log("document" + JSON.stringify(document.forms.myForm.value));
      let fullName = document.forms.myForm.fullName.value
      fullName = fullName.trim();
      // IF Full Name EMPTY
      if (fullName == "") {
        alert("Please enter the Name [Name Should not EMPTY]")
        return false;
      }

      // IF words greater than 2
      let fullNameArray = fullName.split(" ");
      if (fullNameArray.length > 2) {
        alert("Enter valid Name [Max two Words allow]")
        return false;
      }

      // IF CHARACTER of WORD less than 4
      let checkChar = fullNameArray.some(function(word) {
        return word.length < 4;
      })
      if (checkChar) {
        alert("Enter valid Name [Each word with min 4 chars]")
        return false;
      }

      let email = document.forms.myForm.email.value
      // Remove white_spaces
      email = email.trim();
      // Email is blank
      if (email == "") {
        alert("Enter the Email [Email should not EMPTY]")
        return false;
      }

      // String is converted into character array using split
      let emailArray = email.split('');
      if (emailArray.length > 0) {

        // IF SPACE is exist in Email
        if (emailArray.indexOf(" ") !== -1) {
          alert("Enter the valid Email [SPACE is not allowed]");
          return false;
        }

        // IF @ is missing in Email
        if (emailArray.indexOf("@") === -1) {
          alert("Enter the valid Email [@ is missing]");
          return false;
        }

        //If "." is missing in Email
        if (emailArray.indexOf(".") === -1) {
          alert("Enter the valid Email [. is missing]");
          return false;
        }

        //If "." is exact after @
        if (emailArray.indexOf(".") > emailArray.indexOf("@")) {
          if (emailArray.indexOf(".") - emailArray.indexOf("@") == 1) {
            alert("Enter the valid Email  ['@' & '.' continously not allowed]")
            return false;
          }
        }

      }

      let phoneNo = document.forms.myForm.phoneNo.value
      phoneNo = phoneNo.trim()
      if (phoneNo == "") {
        alert("Enter the Phone Number [Phone Number should not EMPTY]")
        return false;
      }

      if (phoneNo.length !== 12) {
        alert('Enter valid Phone Number [number should be of 10 digit]');
        return false;
      }

      // ON SUCCESS
      var person = prompt("Dear " + fullName +
        ", Thank you for your inquiry. A 4 digit verification number has been sent to your phone number:" +
        phoneNo + ", please enter in the following box and submit for confirmation:");

      alert('Validation Successful!');

    }

    // Reset labels
    function resetForm() {
      let phoneCompany = document.getElementById('phoneCompany')
      phoneCompany.innerHTML = '';
      let phoneBelongToState = document.getElementById('phoneBelongToState')
      phoneBelongToState.innerHTML = '';
    }
  </script>
</head>

<body>
  <div class="container">
    <h1><u>Registration</u></h1>
    <p>Please fill in this form:-</p>
    <hr>
    <form class="" name=myForm action="http://pixel6.co/" method="post" autocomplete="off" onsubmit="return validateForm()">
      <div class="">
        <label for="FullName">FullName:-</label><br>
        <input type="text" name="fullName" value="" placeholder="Fullname" onkeydown="return validateFullName(event)"><br>

        <label for="Email">Email:-</label><br>
        <input type="text" name="email" value="" placeholder="Email"><br>

        <label for="Phone Number">Phone Number:-</label><br>
        <input id="phoneNo" type="text" name="phoneNo" value="" placeholder="987-654-3210" onkeydown="return validatePhoneNo(event)">

        <div class="" style="text-align:right;">
          <label id="phoneCompany" style="color:red;padding:10px;font-style: italic;font-size: large;"></label>
          <label id="phoneBelongToState" style="color:green;padding:10px;font-weight: bold;font-size: large;"></label>
        </div>
        <br><br>

        <div class="" style="text-align:right;">
          <button type="reset" value="Reset" onclick="resetForm()">Reset</button>
          <button type="submit" name="submit">Submit</button>
        </div>

      </div>
    </form>
  </div>
</body>

</html>
